Heavily-annotated source from reading snaptoken's kilo tutorial.
